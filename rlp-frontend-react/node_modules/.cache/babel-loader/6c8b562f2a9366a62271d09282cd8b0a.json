{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\Owner\\\\Documents\\\\GitHub\\\\cs2001-2020_21-group_42\\\\rlp-frontend-react\\\\src\\\\Login\\\\Login.js\";\nimport React from 'react';\nimport InputField from './InputField';\nimport SubmitButton from './SubmitButton';\nimport RTP from './Resource Teaching Platform/RTP';\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: '',\n      password: '',\n      buttonDisable: false\n    };\n  }\n\n  setInputValue(property, val) {\n    val = val.trim();\n\n    if (val.length > 12) {\n      return;\n    }\n\n    this.setState({\n      [property]: val\n    });\n  }\n\n  resetForm() {\n    this.setState({\n      username: '',\n      password: '',\n      buttonDisable: false\n    });\n  }\n\n  async doLogin() {\n    if (!this.state.username) {\n      return;\n    }\n\n    if (!this.state.password) {\n      return;\n    }\n\n    this.setState({\n      buttonDisable: true\n    });\n\n    try {\n      let res = await fetch('/login')({\n        method: 'post',\n        headers: {\n          'Accept': 'application/json',\n          'content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username: this.state.username,\n          password: this.state.password\n        })\n      });\n      let result = await res.json();\n\n      if (result && result.success) {\n        RTP.isLoggedIn = true;\n        RTP.username = result.username;\n      } else if (result && result.success === false) {\n        this.resetForm();\n        alert(result.msg);\n      }\n    } catch (e) {\n      console.log(e);\n      this.resetForm();\n    }\n  }\n\n  render() {\n    return (\n      /*#__PURE__*/\n      // this the name which you will see on screen while login\n      // & input filds as well as submit button\n      _jsxDEV(\"div\", {\n        className: \"loginForm\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"RESOURCE LEARNING PLATFORM\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(InputField, {\n          type: \"text\",\n          placeholder: \"Enter Email Address Or Username\",\n          value: this.state.username ? this.username : '',\n          onChange: val => this.setInputValue('username', val)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(InputField, {\n          type: \"password\",\n          placeholder: \"Password\",\n          value: this.state.password ? this.password : '',\n          onChange: val => this.setInputValue('password', val)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(SubmitButton, {\n          text: \"Login\",\n          disabled: this.state.buttonDisabled,\n          onClick: () => this.doLogin()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 5\n      }, this)\n    );\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/Owner/Documents/GitHub/cs2001-2020_21-group_42/rlp-frontend-react/src/Login/Login.js"],"names":["React","InputField","SubmitButton","RTP","Login","Component","constructor","props","state","username","password","buttonDisable","setInputValue","property","val","trim","length","setState","resetForm","doLogin","res","fetch","method","headers","body","JSON","stringify","result","json","success","isLoggedIn","alert","msg","e","console","log","render","buttonDisabled"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,GAAP,MAAgB,kCAAhB;;AAEA,MAAMC,KAAN,SAAoBJ,KAAK,CAACK,SAA1B,CAAoC;AAEhCC,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACTC,MAAAA,QAAQ,EAAE,EADD;AAETC,MAAAA,QAAQ,EAAE,EAFD;AAGTC,MAAAA,aAAa,EAAE;AAHN,KAAb;AAKH;;AAEDC,EAAAA,aAAa,CAACC,QAAD,EAAWC,GAAX,EAAe;AACxBA,IAAAA,GAAG,GAAGA,GAAG,CAACC,IAAJ,EAAN;;AACA,QAAID,GAAG,CAACE,MAAJ,GAAW,EAAf,EAAkB;AACd;AACH;;AACD,SAAKC,QAAL,CAAc;AACV,OAACJ,QAAD,GAAYC;AADF,KAAd;AAGH;;AAEDI,EAAAA,SAAS,GAAG;AACR,SAAKD,QAAL,CAAc;AACVR,MAAAA,QAAQ,EAAC,EADC;AAEVC,MAAAA,QAAQ,EAAC,EAFC;AAGVC,MAAAA,aAAa,EAAE;AAHL,KAAd;AAKH;;AAED,QAAMQ,OAAN,GAAe;AAEX,QAAI,CAAC,KAAKX,KAAL,CAAWC,QAAhB,EAAyB;AACrB;AACH;;AACD,QAAI,CAAC,KAAKD,KAAL,CAAWE,QAAhB,EAAyB;AACrB;AACH;;AACD,SAAKO,QAAL,CAAc;AACVN,MAAAA,aAAa,EAAE;AADL,KAAd;;AAIA,QAAI;AAEA,UAAIS,GAAG,GAAE,MAAMC,KAAK,CAAC,QAAD,CAAL,CAAkB;AAC7BC,QAAAA,MAAM,EAAE,MADqB;AAE7BC,QAAAA,OAAO,EAAE;AACL,oBAAU,kBADL;AAEL,0BAAgB;AAFX,SAFoB;AAM7BC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBjB,UAAAA,QAAQ,EAAE,KAAKD,KAAL,CAAWC,QADJ;AAEjBC,UAAAA,QAAQ,EAAE,KAAKF,KAAL,CAAWE;AAFJ,SAAf;AANuB,OAAlB,CAAf;AAaA,UAAIiB,MAAM,GAAG,MAAMP,GAAG,CAACQ,IAAJ,EAAnB;;AACA,UAAID,MAAM,IAAIA,MAAM,CAACE,OAArB,EAA6B;AACzB1B,QAAAA,GAAG,CAAC2B,UAAJ,GAAgB,IAAhB;AACA3B,QAAAA,GAAG,CAACM,QAAJ,GAAckB,MAAM,CAAClB,QAArB;AACH,OAHD,MAKK,IAAKkB,MAAM,IAAIA,MAAM,CAACE,OAAP,KAAmB,KAAlC,EAAwC;AACzC,aAAKX,SAAL;AACAa,QAAAA,KAAK,CAACJ,MAAM,CAACK,GAAR,CAAL;AACH;AAEJ,KA1BD,CA4BA,OAAMC,CAAN,EAAQ;AACJC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACA,WAAKf,SAAL;AACH;AAEJ;;AAIHkB,EAAAA,MAAM,GAAG;AACP;AAAA;AAAoB;AACA;AACpB;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA,gCAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ,eAQK,QAAC,UAAD;AACG,UAAA,IAAI,EAAC,MADR;AAEG,UAAA,WAAW,EAAC,iCAFf;AAGG,UAAA,KAAK,EAAE,KAAK5B,KAAL,CAAWC,QAAX,GAAsB,KAAKA,QAA3B,GAAsC,EAHhD;AAIG,UAAA,QAAQ,EAAKK,GAAD,IAAQ,KAAKF,aAAL,CAAoB,UAApB,EAAgCE,GAAhC;AAJvB;AAAA;AAAA;AAAA;AAAA,gBARL,eAeI,QAAC,UAAD;AACI,UAAA,IAAI,EAAC,UADT;AAEI,UAAA,WAAW,EAAC,UAFhB;AAGI,UAAA,KAAK,EAAE,KAAKN,KAAL,CAAWE,QAAX,GAAsB,KAAKA,QAA3B,GAAsC,EAHjD;AAII,UAAA,QAAQ,EAAKI,GAAD,IAAQ,KAAKF,aAAL,CAAoB,UAApB,EAAgCE,GAAhC;AAJxB;AAAA;AAAA;AAAA;AAAA,gBAfJ,eAuBI,QAAC,YAAD;AACI,UAAA,IAAI,EAAC,OADT;AAEI,UAAA,QAAQ,EAAG,KAAKN,KAAL,CAAW6B,cAF1B;AAGI,UAAA,OAAO,EAAG,MAAK,KAAKlB,OAAL;AAHnB;AAAA;AAAA;AAAA;AAAA,gBAvBJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAiCH;;AAhHmC;;AAqHpC,eAAef,KAAf","sourcesContent":["import React from 'react';\r\nimport InputField from './InputField';\r\nimport SubmitButton from './SubmitButton';\r\nimport RTP from './Resource Teaching Platform/RTP';\r\n\r\nclass Login extends React.Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            username: '',\r\n            password: '',\r\n            buttonDisable: false\r\n        }\r\n    }\r\n\r\n    setInputValue(property, val){\r\n        val = val.trim();\r\n        if (val.length>12){\r\n            return;\r\n        }\r\n        this.setState({\r\n            [property]: val\r\n        })\r\n    }\r\n\r\n    resetForm (){\r\n        this.setState({\r\n            username:'',\r\n            password:'',\r\n            buttonDisable: false\r\n        })\r\n    }\r\n\r\n    async doLogin(){\r\n\r\n        if (!this.state.username){\r\n            return;\r\n        }\r\n        if (!this.state.password){\r\n            return;\r\n        }\r\n        this.setState({\r\n            buttonDisable: true\r\n        })\r\n\r\n        try {\r\n\r\n            let res= await fetch('/login',) ({\r\n                method: 'post',\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    username: this.state.username,\r\n                    password: this.state.password,\r\n\r\n                })\r\n            });\r\n\r\n            let result = await res.json();\r\n            if (result && result.success){\r\n                RTP.isLoggedIn =true;\r\n                RTP.username= result.username;    \r\n            }\r\n\r\n            else if ( result && result.success === false){\r\n                this.resetForm();\r\n                alert(result.msg);\r\n            }\r\n            \r\n        }\r\n\r\n        catch(e){\r\n            console.log(e);\r\n            this.resetForm();\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n  render() { \r\n    return (            // this the name which you will see on screen while login\r\n                        // & input filds as well as submit button\r\n    <div className=\"loginForm\"> \r\n        \r\n        <h3 >\r\n        RESOURCE LEARNING PLATFORM\r\n        </h3>\r\n       \r\n            \r\n       \r\n         <InputField\r\n            type='text'\r\n            placeholder='Enter Email Address Or Username'\r\n            value={this.state.username ? this.username : ''}\r\n            onChange= { (val)=> this.setInputValue ('username', val)}\r\n        />\r\n\r\n        <InputField\r\n            type='password'\r\n            placeholder='Password'\r\n            value={this.state.password ? this.password : ''}\r\n            onChange= { (val)=> this.setInputValue ('password', val)}\r\n\r\n        />\r\n\r\n        <SubmitButton\r\n            text='Login'\r\n            disabled={ this.state.buttonDisabled}\r\n            onClick= {()=> this.doLogin() }\r\n        />\r\n\r\n    </div>\r\n    );\r\n}\r\n\r\n}\r\n\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}